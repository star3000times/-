# Jetson AGX Xavier 开发环境部署全流程  

## 一、环境准备  
### 1. 主机与系统  
- **主机**：虚拟机（需分配 ≥100G 存储空间），安装 **Ubuntu 20.04 Desktop**（镜像地址：[清华镜像源](https://mirrors.tuna.tsinghua.edu.cn/ubuntu-releases/20.04.6/ubuntu-20.04.6-desktop-amd64.iso) ）。  
- **开发板**：Jetson AGX Xavier（Arm64 架构）。  
- **工具**：USB 线（Type-C 转 USB）、电源线、HDMI 线、显示器。  


## 二、SDK Manager 安装与刷机  

### 1. 下载并安装 SDK Manager  
1. 前往 [Nvidia SDK Manager 官网](https://developer.nvidia.com/sdk-manager) 下载安装包（如 `sdkmanager_2.3.0-12617_amd64.deb` ）。  
2. 进入安装包目录，执行终端命令：  
   ```bash  
   sudo dpkg -i sdkmanager_2.3.0-12617_amd64.deb  # 安装  
   sudo apt-get install -f                      # 修复依赖  
   sudo dpkg -i sdkmanager_2.3.0-12617_amd64.deb  # 重新安装（确保依赖完整）  
   sdkmanager                                    # 启动 SDK Manager  
   ```  


### 2. 开发板进入恢复模式  
1. **硬件连接**：用 Type-C 转 USB 线连接 Xavier 与主机，给 Xavier 接电源并保持关机。  
2. **按键操作**（两种方式，推荐第二种）：  
   - 方式 1：按住 **Recovery 键**（中间键）→ 按住 **Power 键**（最左）1 秒 → 同时松开，进入刷机模式。  
   - 方式 2（更稳）：按住 **Recovery 键**不松手 → 轻按 **Power 键** → 轻按 **Reset 键** → 松开 **Recovery 键**，进入恢复模式。  


### 3. 刷机流程  
1. 启动 `sdkmanager`，按界面指引选择 Xavier 型号、需安装的组件（如 JetPack）。  
2. 若刷机报错 IP 问题，可先按 **Reset 键** → 按 **Power 键** 退出恢复模式，重新配置网络后重试。  


## 三、网络与换源优化  

### 1. 局域网连接配置  
若虚拟机网络异常，改用 **网线直连 + 桥接模式**：  
1. 用两根网线分别连接虚拟机和主机，确保同局域网。  
2. 虚拟机网络设置为 **桥接模式**（物理直连），或手动配置静态 IP。  


### 2. Jetson 换源（可选，加速包下载）  
```bash  
sudo cp /etc/apt/sources.list /etc/apt/sources.list.bak  # 备份原源  
sudo gedit /etc/apt/sources.list                         # 编辑源文件  
```  
替换为清华镜像源（适配 Arm64）：  
```  
deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/ bionic-updates main restricted universe multiverse  
deb-src http://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/ bionic-updates main restricted universe multiverse  
deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/ bionic-security main restricted universe multiverse  
deb-src http://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/ bionic-security main restricted universe multiverse  
deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/ bionic-backports main restricted universe multiverse  
deb-src http://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/ bionic-backports main restricted universe multiverse  
deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/ bionic main universe restricted  
deb-src http://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/ bionic main universe restricted  
```  


## 四、常用工具部署  

### 1. ToDesk 远程工具  
```bash  
wget https://www.todesk.com/linux.html  # 下载对应版本（如 todesk-v4.7.2.0-amd64.deb）  
sudo apt-get install ./todesk-v4.7.2.0-amd64.deb  # 安装  
```  


### 2. VS Code 开发环境  
参考文章：[Jetson 安装 VS Code 教程](https://blog.csdn.net/weixin_52562858/article/details/142533523)  
启动命令（解决沙盒限制）：  
```bash  
code --no-sandbox  
```  


### 3. Miniconda 环境管理  
Miniconda 路径已修改为 `/home/jetson/miniconda3`，操作流程：  
```bash  
source /home/jetson/miniconda3/bin/activate  # 激活 base 环境  
/home/jetson/miniconda3/bin/conda create --name labelimg_env python=3.8  # 创建新环境  
source /home/jetson/miniconda3/bin/activate labelimg_env  # 激活环境  
pip install [包名]  # 安装依赖（如 labelimg 等）  
```  


## 五、参考资源  
- 刷机视频：[Jetson Orin NX 刷机全流程](https://www.bilibili.com/video/BV1DMTWzSEto)  
- 参考文章：  
  - [Jetson 刷机与环境配置](https://blog.csdn.net/m0_73997099/article/details/127167996)  
  - [SDK Manager 刷机细节](https://blog.csdn.net/wbzhang233/article/details/104283451)  
  - [恢复模式与网络配置](https://blog.csdn.net/FSKEps/article/details/106558205)  


**说明**：刷机分两阶段，先通过 USB 连接刷机，再用网线更新（或手动下载包本地安装）。操作中若遇问题，优先参考官方文档或社区问答～